(function(e){function t(t){for(var n,i,u=t[0],o=t[1],c=t[2],p=0,m=[];p<u.length;p++)i=u[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&m.push(a[i][0]),a[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);l&&l(t);while(m.length)m.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,u=1;u<r.length;u++){var o=r[u];0!==a[o]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],o=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=o;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},"46de":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("KHeader"),r("transition",{attrs:{name:"fade"}},[r("router-view")],1)],1)},s=[],i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},u=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",{attrs:{id:"header"}},[r("a",{attrs:{href:"/",id:"logo"}}),r("nav",{attrs:{id:"nav"}},[r("a",{attrs:{href:""}},[e._v("手机")]),r("a",{attrs:{href:""}},[e._v("笔记本")]),r("a",{attrs:{href:""}},[e._v("家居")])]),r("div",{attrs:{id:"user"}},[r("a",{attrs:{href:""}},[e._v("登录")]),r("a",{attrs:{href:""}},[e._v("注册")])])])}],o={name:"KHeader"},c=o,l=r("2877"),p=Object(l["a"])(c,i,u,!1,null,null,null),m=p.exports,f={name:"App",components:{KHeader:m}},d=f,g=(r("034f"),Object(l["a"])(d,a,s,!1,null,null,null)),v=g.exports,h=(r("46de"),r("8c4f")),b=r("323e"),w=r.n(b),_=(r("a5d8"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"main"}},[r("ul",{staticClass:"items-list"},e._l(e.items,(function(t){return r("router-link",{key:t.id,staticClass:"panel",attrs:{to:{name:"Detail",params:{id:t.id}},tag:"li"}},[r("img",{staticClass:"cover",attrs:{src:t.cover,alt:""}}),r("div",{staticClass:"name"},[e._v(e._s(t.name))]),r("div",{staticClass:"price"},[e._v(e._s(e._f("price")(t.price)))])])})),1),r("div",{staticClass:"pagination-container"},[r("KPagination",{attrs:{page:e.page,total:e.total,prepage:e.prepage},on:{change:e.changePage}})],1)])}),x=[],y=(r("a9e3"),r("96cf"),r("1da1")),O=r("bc3a"),j=r.n(O),R="/api",k={item:{getItems:"/items",getItem:"/item"},user:{login:"/login"}};function C(){return $.apply(this,arguments)}function $(){return $=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{page:1,prepage:10},e.next=3,j()({url:k.item.getItems,params:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}function P(e){return D.apply(this,arguments)}function D(){return D=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j()({url:k.item.getItem+"/"+t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function E(e){return I.apply(this,arguments)}function I(){return I=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j()({method:"post",url:k.user.login,data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}j.a.defaults.baseURL=R;r("b680");var M=function(e){return"¥ "+(e/100).toFixed(2)},S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pagination"},[r("a",{staticClass:"prev",attrs:{href:""}},[e._v("上一页")]),e._l(e.pages,(function(t){return r("a",{key:t,class:{current:t==e.page},attrs:{href:""},on:{click:function(r){return r.preventDefault(),e.changePage(t)}}},[e._v(e._s(t))])})),r("a",{staticClass:"next",attrs:{href:""}},[e._v("下一页")])],2)},L=[],N={name:"KPagination",props:{page:{type:Number,default:1},total:{type:Number,default:0},prepage:{type:Number,default:1}},computed:{pages:function(){return Math.ceil(this.total/this.prepage)}},methods:{changePage:function(e){this.$emit("update:page",e),this.page!==e&&this.$emit("change",e)}}},K=N,H=Object(l["a"])(K,S,L,!1,null,null,null),T=H.exports,J={name:"Main",data:function(){return{items:[],page:1,total:0,prepage:8}},filters:{price:M},components:{KPagination:T},created:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=!!localStorage.getItem("token"),r){t.next=5;break}e.$router.push({name:"Login"}),t.next=7;break;case 5:return t.next=7,e.getItems();case 7:case"end":return t.stop()}}),t)})))()},watch:{$route:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("变了"),t.next=3,e.getItems();case 3:case"end":return t.stop()}}),t)})))()}},methods:{changePage:function(e){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$router.push({name:"Main",query:{page:e}});case 1:case"end":return r.stop()}}),r)})))()},getItems:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,i,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.page=Number(e.$route.query.page)||1,t.next=3,C({page:e.page,prepage:e.prepage});case 3:r=t.sent,n=r.data,a=n.items,s=n.page,i=n.prepage,u=n.total,e.items=a,e.page=s,e.total=u,e.prepage=i;case 13:case"end":return t.stop()}}),t)})))()}}},q=J,z=Object(l["a"])(q,_,x,!1,null,null,null),A=z.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"main"}},[e.isError?r("div",[r("h3",[e._v("获取商品失败")])]):r("div",[e.item?r("div",[r("h1",{staticClass:"title"},[e._v(e._s(e.item.name))]),r("div",{staticClass:"detail",domProps:{innerHTML:e._s(e.item.detail.detail)}})]):r("div",[r("p",[e._v("数据加载中……")])])])])},U=[],B={name:"Detail",data:function(){return{item:null,isError:!1}},created:function(){return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},beforeRouteEnter:function(e,t,r){var n=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("beforeRouteEnter",n,e.params.id),t.prev=1,t.next=4,P(e.params.id);case 4:a=t.sent,s=a.data,r((function(e){e.item=s})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),r((function(e){e.isError=!0}));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()}},G=B,Q=Object(l["a"])(G,F,U,!1,null,null,null),V=Q.exports,W=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"main"}},[r("div",{staticClass:"panel",attrs:{id:"login"}},[r("h2",[e._v("登录")]),r("form",{attrs:{action:""}},[r("div",{staticClass:"form-item"},[r("label",[r("span",{staticClass:"txt"},[e._v("姓名：")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.submitData.username,expression:"submitData.username"}],staticClass:"form-input",attrs:{type:"text"},domProps:{value:e.submitData.username},on:{input:function(t){t.target.composing||e.$set(e.submitData,"username",t.target.value)}}})])]),r("div",{staticClass:"form-item"},[r("label",[r("span",{staticClass:"txt"},[e._v("密码：")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.submitData.password,expression:"submitData.password"}],staticClass:"form-input",attrs:{type:"password"},domProps:{value:e.submitData.password},on:{input:function(t){t.target.composing||e.$set(e.submitData,"password",t.target.value)}}})])]),r("div",{staticClass:"form-item"},[r("label",[r("button",{staticClass:"form-button primary",on:{click:function(t){return t.preventDefault(),e.doLogin(t)}}},[e._v("登录")]),r("button",{staticClass:"form-button"},[e._v("注册")])])]),r("div",{staticClass:"txt"},[e._v(e._s(e.message))])])])])},X=[],Y={name:"Login",data:function(){return{submitData:{username:"",password:""},message:""}},methods:{doLogin:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E({name:e.submitData.username,password:e.submitData.password});case 3:r=t.sent,e.message="登陆成功",localStorage.setItem("user",JSON.stringify(r.data)),localStorage.setItem("token",r.headers.authorization),e.$router.push({name:"Main"}),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.message=t.t0.response.data;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}},Z=Y,ee=Object(l["a"])(Z,W,X,!1,null,null,null),te=ee.exports,re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v(" 注册 ")])},ne=[],ae={name:"Register"},se=ae,ie=Object(l["a"])(se,re,ne,!1,null,null,null),ue=ie.exports;n["a"].use(h["a"]);var oe=new h["a"]({mode:"history",routes:[{path:"/",name:"Main",component:A},{path:"/detail/:id",name:"Detail",component:V},{path:"/login",name:"Login",component:te},{path:"/register",name:"Register",component:ue}]});oe.beforeEach((function(e,t,r){w.a.start(),r()})),oe.afterEach((function(){w.a.done()}));var ce=oe;n["a"].config.productionTip=!1,new n["a"]({router:ce,render:function(e){return e(v)}}).$mount("#app")},"85ec":function(e,t,r){}});
//# sourceMappingURL=app.d6a8eedf.js.map